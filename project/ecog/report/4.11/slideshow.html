<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>4.13</title>
		<style>
			body {
	font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
h1, h2, h3 {
	font-weight: 400;
	margin-bottom: 0;
}
.remark-slide-content h1 { font-size: 3em; }
.remark-slide-content h2 { font-size: 2em; }
.remark-slide-content h3 { font-size: 1.6em; }
.footnote {
	position: absolute;
	bottom: 3em;
}
li p { line-height: 1.25em; }
.red { color: #fa0000; }
.large { font-size: 2em; }
a, a > code {
	color: rgb(249, 38, 114);
	text-decoration: none;
}
code {
	background: none repeat scroll 0 0 #F8F8FF;
  border: 1px solid #DEDEDE;
  border-radius: 3px 	;
  padding: 0 0.2em;
}
.remark-code, .remark-inline-code { font-family: "Bitstream Vera Sans Mono", "Courier", monospace; }
.remark-code-line-highlighted     { background-color: #373832; }
.pull-left {
	float: left;
	width: 47%;
}
.pull-right {
	float: right;
	width: 47%;
}
.pull-right ~ p {
	clear: both;
}
#slideshow .slide .content code {
	font-size: 0.8em;
}
#slideshow .slide .content pre code {
	font-size: 0.9em;
	padding: 15px;
}
.main-title, .title {
	background: #272822;
	color: #777872;
	text-shadow: 0 0 20px #333;
}
.title h1, .title h2, .main-title h1, .main-title h2 {
	color: #f3f3f3;
	line-height: 0.8em;
}
/* Custom */
.remark-code {
	display: block;
	padding: 0.5em;
}

		</style>
	</head>
	<body>
		<textarea id="source">
# 4.13

---
## different mask out methods

original ecog data
<img src="1.png" alt="drawing" style="width:600px;"/>

<img src="2.png" alt="drawing" style="width:600px;"/>
---

## different mask out methods
- zero mask out
- exponential mask out

<img src="3.png" alt="drawing" style="width:600px;"/>

<img src="4.png" alt="drawing" style="width:600px;"/>

---

<img src="5.png" alt="drawing" style="width:400px;"/>

<img src="6.png" alt="drawing" style="width:600px;"/>

<img src="7.png" alt="drawing" style="width:600px;"/>

---
### extracted features
<img src="8.png" alt="drawing" style="width:230px;"/>
<img src="9.png" alt="drawing" style="width:230px;"/>
<img src="10.png" alt="drawing" style="width:230px;"/>

---
## experiment
- options:
    - use z or not
    - use RNN for f0/loudness/z or not
    - use different mask out data to extract different features
- seems that no use z, use RNN for loudness is a relatively good choice(experiment 4, 5, 6)
- the decoding mainly relies on loudness feature, and f0 feature is hard to encode.

---
## experiment 1 
- use z
- do not use RNN for f0, do not use RNN for loudness
- f0 use exponential mask out, loudness use exponential mask out, z use exponential mask out

<audio controls>
<source src="exp1/gt.wav" type="audio/wav">
</audio> <audio controls>
<source src="exp1/recon.wav" type="audio/wav">
</audio>

<img src="tb1.png" alt="drawing" style="width:400px;"/>

---
<img src="exp1/spec.png" alt="drawing" style="width:400px;"/>

<img src="exp1/waveform.png" alt="drawing" style="width:400px;"/>


Correlation coefficient and STOI

<img src="exp1/pcc.png" alt="drawing" style="width:300px;"/>  <img src="exp1/stoi.png" alt="drawing" style="width:300px;"/>

---
### feature extracted
- left is from ecog using ecog encoder
- right is from audio using DDSP autoencoder
- do not use RNN for f0, do not use RNN for loudness
- f0 use exponential mask out, loudness use exponential mask out, z use exponential mask out

<img src="exp1/feature.png" alt="drawing" style="width:350px;"/><img src="feature_gt.png" alt="drawing" style="width:350px;"/>

---
## experiment 2
- not use z
- do not use RNN for f0, do not use RNN for loudness
- f0 use exponential mask out, loudness use exponential mask out, z use exponential mask out

<audio controls>
<source src="exp2/gt.wav" type="audio/wav">
</audio> <audio controls>
<source src="exp2/recon.wav" type="audio/wav">
</audio>

<img src="tb2.png" alt="drawing" style="width:400px;"/>

---
<img src="exp2/spec.png" alt="drawing" style="width:400px;"/>

<img src="exp2/waveform.png" alt="drawing" style="width:400px;"/>


Correlation coefficient and STOI

<img src="exp2/pcc.png" alt="drawing" style="width:300px;"/>  <img src="exp2/stoi.png" alt="drawing" style="width:300px;"/>

---
### feature extracted
- left is from ecog using ecog encoder
- right is from audio using DDSP autoencoder

<img src="exp2/feature.png" alt="drawing" style="width:350px;"/><img src="feature_gt.png" alt="drawing" style="width:350px;"/>

---
## experiment 3 
- not use z
- do not use RNN for f0, use RNN for loudness
- f0 use exponential mask out, loudness use exponential mask out, z use exponential mask out

<audio controls>
<source src="exp3/gt.wav" type="audio/wav">
</audio> <audio controls>
<source src="exp3/recon.wav" type="audio/wav">
</audio>

<img src="tb3.png" alt="drawing" style="width:400px;"/>

---
<img src="exp3/spec.png" alt="drawing" style="width:400px;"/>

<img src="exp3/waveform.png" alt="drawing" style="width:400px;"/>


Correlation coefficient and STOI

<img src="exp3/pcc.png" alt="drawing" style="width:300px;"/>  <img src="exp1/stoi.png" alt="drawing" style="width:300px;"/>

---
### feature extracted
- left is from ecog using ecog encoder
- right is from audio using DDSP autoencoder

<img src="exp3/feature.png" alt="drawing" style="width:350px;"/><img src="feature_gt.png" alt="drawing" style="width:350px;"/>

---
## experiment 4 
- not use z
- do not use RNN for f0, use RNN for loudness
- f0 use original data, loudness use zero mask out, z use original data

<audio controls>
<source src="exp4/gt.wav" type="audio/wav">
</audio> <audio controls>
<source src="exp4/recon.wav" type="audio/wav">
</audio>

<img src="tb4.png" alt="drawing" style="width:400px;"/>

---
<img src="exp4/spec.png" alt="drawing" style="width:400px;"/>

<img src="exp4/waveform.png" alt="drawing" style="width:400px;"/>


Correlation coefficient and STOI

<img src="exp4/pcc.png" alt="drawing" style="width:300px;"/>  <img src="exp4/stoi.png" alt="drawing" style="width:300px;"/>

---
### feature extracted
- left is from ecog using ecog encoder
- right is from audio using DDSP autoencoder

<img src="exp4/feature.png" alt="drawing" style="width:350px;"/><img src="feature_gt.png" alt="drawing" style="width:350px;"/>

---
## experiment 5 
- not use z
- do not use RNN for f0, use RNN for loudness
- f0 use exponential mask out, loudness use zero mask out, z use original data

<audio controls>
<source src="exp5/gt.wav" type="audio/wav">
</audio> <audio controls>
<source src="exp5/recon.wav" type="audio/wav">
</audio>

<img src="tb5.png" alt="drawing" style="width:400px;"/>

---
<img src="exp5/spec.png" alt="drawing" style="width:400px;"/>

<img src="exp5/waveform.png" alt="drawing" style="width:400px;"/>


Correlation coefficient and STOI

<img src="exp5/pcc.png" alt="drawing" style="width:300px;"/>  <img src="exp5/stoi.png" alt="drawing" style="width:300px;"/>

---
### feature extracted
- left is from ecog using ecog encoder
- right is from audio using DDSP autoencoder

currently the **best** way to encode f0: do not use RNN, use exponential mask out

<img src="exp5/feature.png" alt="drawing" style="width:350px;"/><img src="feature_gt.png" alt="drawing" style="width:350px;"/>

---
## experiment 6 

- use z
- do not use RNN for f0, use RNN for loudness
- f0 use original data, loudness use zero mask out, z use original data

<audio controls>
<source src="exp6/gt.wav" type="audio/wav">
</audio> <audio controls>
<source src="exp6/recon.wav" type="audio/wav">
</audio>

<img src="tb6.png" alt="drawing" style="width:400px;"/>

---
<img src="exp6/spec.png" alt="drawing" style="width:400px;"/>

<img src="exp6/waveform.png" alt="drawing" style="width:400px;"/>


Correlation coefficient and STOI

<img src="exp6/pcc.png" alt="drawing" style="width:300px;"/>  <img src="exp6/stoi.png" alt="drawing" style="width:300px;"/>

---
### feature extracted
- left is from ecog using ecog encoder
- right is from audio using DDSP autoencoder

<img src="exp6/feature.png" alt="drawing" style="width:350px;"/><img src="feature_gt.png" alt="drawing" style="width:350px;"/>

---
## TODO

- [ ] how to better encode f0
    - the decoding mainly depends on loudness, improve f0 encoding did not help with decoding a lot
- [ ] analyze CREPEPRETRAINED embedding loss
    - why is it always 0 (thus will not help training the model)
    - (but in some cases they are big (weights not loaded correctly?), although other related loss is small)
- [ ] overfitting problem
    - smaller training loss (from 0.9 to 0.4 after adding RNN and mask out) did not give better results


		</textarea>
		<script src="https://gnab.github.io/remark/downloads/remark-latest.min.js"></script>
		<script>
			var slideshow = remark.create();
		</script>
		<script></script>
	</body>
</html>
